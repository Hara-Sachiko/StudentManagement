<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>受講生登録</title>

  <script>
    // 行追加
    function addCourseRow() {
        const table = document.getElementById("courseTable");
        const newRow = table.insertRow(-1);

        const courseCell = newRow.insertCell(0);
        const dateCell = newRow.insertCell(1);

        courseCell.innerHTML =
            '<input type="text" name="courseNames" placeholder="コース名を入力">';

        dateCell.innerHTML =
            '<input type="text" name="startDates" placeholder="開始日(YYYY-MM-DD)">';
    }
  </script>
</head>

<body>

<h1>受講生登録</h1>

<form th:action="@{/registerStudent}" th:object="${studentDetail}" method="post">

  <div>
    <label for="fullname">名前:</label>
    <input type="text" id="fullname" th:field="*{student.fullName}" required />
  </div>

  <div>
    <label for="furigana">フリガナ:</label>
    <input type="text" id="furigana" th:field="*{student.furigana}" required />
  </div>

  <div>
    <label for="nickname">ニックネーム:</label>
    <input type="text" id="nickname" th:field="*{student.nickname}" required />
  </div>

  <div>
    <label for="region">地域:</label>
    <input type="text" id="region" th:field="*{student.region}" required />
  </div>

  <div>
    <label for="age">年齢:</label>
    <input type="text" id="age" th:field="*{student.age}" required />
  </div>

  <div>
    <label for="gender">性別:</label>
    <input type="text" id="gender" th:field="*{student.gender}" required />
  </div>

  <div>
    <label for="remark">備考:</label>
    <input type="text" id="remark" th:field="*{student.remark}"/>
  </div>

  <!-- 受講コース -->
  <h3>受講コース（複数追加できます）</h3>
  <table id="courseTable" border="0">
    <tr>
      <th>コース名</th>
    </tr>

    <tr>
      <td>
        <input type="text" th:field="*{studentCourses[0].courseName}" placeholder="コース名を入力">
      </td>
    </tr>
  </table>

  <button type="button" onclick="addCourseRow()">＋ 行を追加</button>

  <br><br>
  <div>
    <button type="submit">登録</button>
  </div>

</form>

<script>
  let courseIndex = 1; // 0は最初の行
  function addCourseRow() {
      const table = document.getElementById("courseTable");
      const newRow = table.insertRow(-1);
      const cell = newRow.insertCell(0);
      cell.innerHTML = `<input type="text" name="studentCourses[${courseIndex}].courseName" placeholder="コース名を入力">`;
      courseIndex++;
  }
</script>